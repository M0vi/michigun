'use client'
import React,{useState,useEffect,useMemo}from'react'
import{motion,AnimatePresence}from'framer-motion'
import Image from'next/image'
import useSWR from'swr'
import{Copy,Check,Download,MonitorPlay,Terminal,FileCode,FileText,AlertTriangle,Search,X,Activity,Clock,BarChart3,Music,Code,Gamepad2,Moon,Circle,Crosshair,Move,Bot,Route,Zap,Hammer,UserCog,Globe,Skull,TabletSmartphone,Coins,Box,Magnet,Eye,UserX,Ghost,Wind,FastForward,ArrowUpCircle,MapPin,Wrench}from'lucide-react'
import{playSound,fetcher,cn}from'@/lib/utils'
const CONFIG={script:'loadstring(request({Url="https://michigun.xyz/script",Method="GET"}).Body)()',discordLink:'https://discord.gg/pWeJUBabvF',videoId:'20zXmdpUHQA',devs:[{id:'1163467888259239996',role:'Dev'},{id:'1062463366792216657',role:'CMO'}],games:[{name:'Tevez',icon:'https://tr.rbxcdn.com/180DAY-84c7c1edcc63c7dfab5712b1ad377133/768/432/Image/Webp/noFilter'},{name:'Delta',icon:'https://tr.rbxcdn.com/180DAY-8952e9d8abbff8104b22356f8b66f962/768/432/Image/Webp/noFilter'},{name:'Soucre',icon:'https://tr.rbxcdn.com/180DAY-791e58a5c620d0a301d60c346688e6ec/512/512/Image/Webp/noFilter'},{name:'Nova Era',icon:'https://tr.rbxcdn.com/180DAY-c2aa25a2b7a9e0556e93c63927cae5cc/768/432/Image/Webp/noFilter'},{name:'Solara',icon:'https://tr.rbxcdn.com/180DAY-e0fe33e9562b5e4003ed9ccc98f5b29a/768/432/Image/Webp/noFilter'},{name:'Mathias',icon:'https://tr.rbxcdn.com/180DAY-7ad6813df58de350ee91727f18e048d6/768/432/Image/Webp/noFilter'},{name:'Victor',icon:'https://tr.rbxcdn.com/180DAY-07913e65ddf48f064fa581415301f87c/768/432/Image/Webp/noFilter'},{name:'Entre outros...',icon:''}],features:{global:[{name:'Silent aim',icon:Crosshair,type:'safe',category:'PVP',desc:'Permite matar alvos com facilidade, redirecionando os tiros a eles.'},{name:'Hitbox expander',icon:Move,type:'safe',category:'PVP',desc:'Permite amplificar o tamanho da hitbox dos inimigos, facilitando o acerto de tiros.'},{name:'ESP',icon:Eye,type:'safe',category:'PVP',desc:'Permite ver inimigos através das paredes.'},{name:'Auto JJ\'s',icon:Activity,type:'safe',category:'Treino',desc:'Realiza polichinelos automaticamente.'},{name:'TAS',icon:Route,type:'safe',category:'Treino',desc:'Permite realizar percusos (parkours) automaticamente, garatindo que você não erre na hora H.'},{name:'F3X',icon:Hammer,type:'safe',category:'Treino',desc:'Permite modificar o tamanho de estruturas, seja aumentando ou diminuindo seus tamanhos.'},{name:'ChatGPT',icon:Bot,type:'safe',category:'Treino',desc:'API do ChatGPT integrada, permitindo que você faça perguntas e responda rapidamente qualquer questão.'},{name:'Anti-lag',icon:Zap,type:'safe',category:'Misc',desc:'Suprime texturas de alta qualidade e otimiza o jogo, garatindo mais FPS.'},{name:'Char',icon:UserCog,type:'visual',category:'Misc',desc:'Permite alterar o seu char ou o char de terceiros para qualquer um.'},{name:'Anonimizar',icon:UserX,type:'safe',category:'Misc',desc:'Permite você gravar sua tela sem se identificar.'},{name:'Invisibilidade',icon:Ghost,type:'safe',category:'Local',desc:'Permire ficar invisivel para os outros.'},{name:'Fling',icon:Wind,type:'risk',category:'Local',desc:'Permite arremessar outros para o limbo'},{name:'Speed',icon:FastForward,type:'safe',category:'Local',desc:'Permite alterar sua velocidade.'},{name:'Jump',icon:ArrowUpCircle,type:'safe',category:'Local',desc:'Permite alterar o seu pulo.'},{name:'Teleport',icon:MapPin,type:'safe',category:'Local',desc:'Permite teleportar para outros jogadores.'}],tevez:[{name:'Global +',icon:Globe,type:'safe',category:'Geral',desc:'Todas as funções globais funcionam neste mapa.'},{name:'Kill aura',icon:Skull,type:'risk',category:'Geral',desc:'Permite matar todos os inimigos ao redor instantaneamente.'},{name:'Mods',icon:Wrench,type:'safe',category:'Geral',desc:'Permite modificar sua arma.'},{name:'Spoofer',icon:TabletSmartphone,type:'safe',category:'Geral',desc:'Permite alterar o dispositivo mostrado no seu personagem, o que garante que você possa fazer tanto treinos MOBILE quanto PC.'},{name:'Autofarm',icon:Coins,type:'safe',category:'Geral',desc:'Permite roubar o banco automaticamente.'}],delta:[{name:'Global +',icon:Globe,type:'safe',category:'Geral',desc:'Todas as funções globais funcionam aqui.'},{name:'Money',icon:Coins,type:'safe',category:'Geral',desc:'Permite receber qualquer quantia de dinheiro instantaneamente.'}],soucre:[{name:'Global +',icon:Globe,type:'safe',category:'Geral',desc:'Todas as funções globais funcionam aqui.'},{name:'Autofarm',icon:Magnet,type:'safe',category:'Geral',desc:'Realiza o trabalho de lixeiro automaticamente com rapidez.'}],nova_era:[{name:'Global +',icon:Globe,type:'safe',category:'Geral',desc:'Todas as funções globais funcionam aqui.'},{name:'Autofarm',icon:Coins,type:'safe',category:'Geral',desc:'Ganha dinheiro automaticamente.'}]}}
const GlobalStyles=()=>(<style jsx global>{`:root{--bg-color:#000;--surface-color:#09090b;--border-color:rgba(255,255,255,.08)}body{background-color:var(--bg-color);color:#fff;background-image:radial-gradient(circle at 50% 0%,rgba(255,255,255,.03) 0%,transparent 50%),linear-gradient(to right,rgba(255,255,255,.02) 1px,transparent 1px),linear-gradient(to bottom,rgba(255,255,255,.02) 1px,transparent 1px);background-size:100% 100%,40px 40px,40px 40px;background-attachment:fixed;user-select:none;-webkit-user-select:none}::-webkit-scrollbar{width:4px;height:4px}::-webkit-scrollbar-thumb{background:#27272a;border-radius:4px}.animate-marquee{animation:marquee 30s linear infinite}.animate-marquee:hover{animation-play-state:paused}@keyframes marquee{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}.fade-edges{mask-image:linear-gradient(to right,transparent,black 10%,black 90%,transparent)}`}</style>)
const CodeDisplay=()=>(<div className="font-mono text-[11px] sm:text-xs whitespace-pre-wrap break-all leading-relaxed"><span className="text-pink-500">loadstring</span>(<span className="text-blue-400">request</span>({"{"}<span className="text-zinc-300">Url</span>=<span className="text-green-400">"https://michigun.xyz/script"</span>,<span className="text-zinc-300">Method</span>=<span className="text-green-400">"GET"</span>{"}"}).<span className="text-blue-400">Body</span>)()</div>)
const CountUp=({end}:{end:number})=>{const[c,setC]=useState(0);useEffect(()=>{let s=0;const d=1500,i=end/(d/16),t=setInterval(()=>{s+=i;if(s>=end){setC(end);clearInterval(t)}else setC(Math.floor(s))},16);return()=>clearInterval(t)},[end]);return<>{c.toLocaleString()}</>}
const Countdown=()=>{const[t,setT]=useState('');useEffect(()=>{const k=()=>{const n=new Date(),m=new Date(n);m.setHours(24,0,0,0);const d=m.getTime()-n.getTime(),h=Math.floor((d/(36e5))%24),x=Math.floor((d/6e4)%60);setT(`${h}h ${x}m`)};const i=setInterval(k,6e4);k();return()=>clearInterval(i)},[]);return<span>{t}</span>}
function StatsDeck(){const{data}=useSWR('/api/stats',fetcher,{refreshInterval:1e4});return(<div className="grid grid-cols-3 gap-2 w-full h-full">{[{l:'Total',i:Activity,v:data?.executions},{l:'Hoje',i:BarChart3,v:data?.daily},{l:'Reseta em',i:Clock,v:'cd'}].map((s,j)=>(<div key={j} className="flex flex-col p-4 bg-[#0a0a0a] border border-white/5 rounded-xl"><div className="flex items-center gap-2 mb-2 text-zinc-500"><s.i size={14}/><span className="text-[10px] font-bold uppercase tracking-widest">{s.l}</span></div><span className="font-mono text-xl font-medium text-white">{s.v==='cd'?<Countdown/>:s.v?<CountUp end={s.v as number}/>:'---'}</span></div>))}</div>)}
function TeamCard({dev}:{dev:any}){const{data}=useSWR(`https://api.lanyard.rest/v1/users/${dev.id}`,fetcher,{refreshInterval:5e3});const u=data?.success?data.data:null,s=u?.listening_to_spotify&&u.spotify,a=u?.activities?.find((x:any)=>x.type!==4&&x.name!=='Spotify');let t='Offline',I=Circle,c='text-zinc-600';if(s){t=u.spotify.song;I=Music;c='text-white animate-pulse'}else if(a){t=a.name==='Code'?'Codando':a.name;I=a.name==='Code'?Code:Gamepad2;c='text-white'}else{const st=u?.discord_status;if(st==='online'){t='Online';c='text-green-500'}else if(st==='idle'){t='Ausente';I=Moon;c='text-amber-500'}else if(st==='dnd'){t='Ocupado';c='text-red-500'}}return(<div className="flex items-center gap-4 p-3 bg-transparent border border-transparent hover:bg-[#0a0a0a] hover:border-white/10 rounded-xl transition-all group" onMouseEnter={()=>playSound('hover')}><Image src={u?.discord_user?.avatar?`https://cdn.discordapp.com/avatars/${dev.id}/${u.discord_user.avatar}.png`:`https://ui-avatars.com/api/?name=Dev`} alt="Avatar" width={38} height={38} className="rounded-full grayscale group-hover:grayscale-0 transition-all" unoptimized/><div className="flex-1 min-w-0"><div className="flex justify-between items-center mb-1"><span className="font-medium text-sm text-zinc-200 truncate">{u?.discord_user?.username||'Carregando...'}</span><span className="text-[9px] font-mono text-zinc-500 uppercase">{dev.role}</span></div><div className="flex items-center gap-2 text-xs text-zinc-500 truncate"><I size={10} className={c}/><span className="truncate">{t}</span></div></div></div>)}
function TeamSection(){return(<div className="flex flex-col gap-4"><h2 className="text-[10px] font-mono font-bold text-zinc-500 uppercase tracking-[.2em]">Equipe</h2><div className="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2">{CONFIG.devs.map((d:any)=><TeamCard key={d.id} dev={d}/>)}</div></div>)}
function FeatureSection(){const[t,setT]=useState('global'),[s,setS]=useState(''),[m,setM]=useState<{t:string;d:string}|null>(null);const filtered=useMemo(()=>((CONFIG.features as any)[t].filter((f:any)=>f.name.toLowerCase().includes(s.toLowerCase())||f.desc.toLowerCase().includes(s.toLowerCase()))),[t,s]);const grouped=useMemo(()=>filtered.reduce((acc:any,f:any)=>{const c=f.category||'Geral';if(!acc[c])acc[c]=[];acc[c].push(f);return acc},{}),[filtered]);return(<section className="flex flex-col gap-6 mt-4"><div className="flex flex-col md:flex-row justify-between gap-4"><h2 className="text-[10px] font-mono font-bold text-zinc-500 uppercase tracking-[.2em]">Funções</h2><div className="relative w-full md:w-64"><Search className="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-600" size={14}/><input type="text" placeholder="Buscar" value={s} onChange={e=>setS(e.target.value)} className="w-full bg-[#0a0a0a] border border-white/10 rounded-lg pl-9 pr-3 py-2 text-xs text-white focus:outline-none focus:border-white/30"/></div></div><div className="flex gap-2 border-b border-white/5 pb-px overflow-x-auto scrollbar-hide">{Object.keys(CONFIG.features).map(x=>(<button key={x} onClick={()=>{setT(x);playSound('click')}} className={cn("relative px-4 py-2 text-xs font-mono transition-colors",t===x?"text-white":"text-zinc-600")}>{t===x&&<motion.div layoutId="tabLine" className="absolute bottom-0 left-0 right-0 h-px bg-white"/>}{x.toUpperCase()}</button>))}</div><div className="flex flex-col gap-8">{Object.entries(grouped).map(([c,i]:any)=>(<div key={c} className="flex flex-col gap-3"><h3 className="text-[9px] font-mono text-zinc-600 uppercase border-l border-zinc-700 pl-2">{c}</h3><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3"><AnimatePresence mode="popLayout">{i.map((f:any,j:number)=>(<motion.div key={f.name} initial={{opacity:0,y:10}} animate={{opacity:1,y:0}} exit={{opacity:0,scale:.95}} transition={{delay:j*.03}} onClick={()=>{setM({t:f.name,d:f.desc});playSound('click')}} className="group bg-[#0a0a0a] border border-white/5 hover:border-white/15 rounded-xl p-4 cursor-pointer min-h-[100px] flex flex-col justify-between"><div className="flex justify-between"><f.icon className="text-zinc-600 group-hover:text-white" size={18}/><div className={cn("w-2 h-2 rounded-full",f.type==='safe'?"bg-green-500/50":f.type==='risk'?"bg-red-500/50":"bg-purple-500/50")}/></div><div className="font-mono text-xs text-zinc-300">{f.name}</div></motion.div>))}</AnimatePresence></div></div>))}</div><AnimatePresence>{m&&(<div className="fixed inset-0 z-[999] flex items-center justify-center p-4"><motion.div initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}} onClick={()=>setM(null)} className="absolute inset-0 bg-black/80 backdrop-blur-sm"/><motion.div initial={{opacity:0,scale:.98}} animate={{opacity:1,scale:1}} className="relative w-full max-w-sm bg-[#050505] border border-white/10 rounded-xl p-6"><button onClick={()=>setM(null)} className="absolute top-4 right-4 text-zinc-600 hover:text-white"><X size={16}/></button><h3 className="text-sm font-mono text-white mb-3">{m.t}</h3><p className="text-zinc-400 text-xs">{m.d}</p></motion.div></div>)}</AnimatePresence></section>)}
export default function Home(){const[c,setC]=useState(false),[d,setD]=useState(false),[v,setV]=useState(false);useEffect(()=>{const h=(e:KeyboardEvent)=>{if(e.key==='F12'||(e.ctrlKey&&e.shiftKey&&['I','J','C'].includes(e.key))||(e.ctrlKey&&e.key==='u'))e.preventDefault()};document.addEventListener('keydown',h);document.addEventListener('contextmenu',e=>e.preventDefault());return()=>{document.removeEventListener('keydown',h)}},[]);const copy=()=>{playSound('click');navigator.clipboard.writeText(CONFIG.script);setC(true);setTimeout(()=>setC(false),2e3)};const dl=(e:string)=>{const a=document.createElement('a'),f=new Blob([CONFIG.script],{type:'application/octet-stream'});a.href=URL.createObjectURL(f);a.download=`michigun.${e}`;a.click();setD(false)};return(<main className="w-full max-w-4xl mx-auto p-6 md:p-10 flex flex-col gap-12 relative z-10 select-none"><GlobalStyles/><header className="flex flex-col gap-2 pt-8"><h1 className="text-3xl md:text-4xl font-semibold text-white tracking-tighter">michigun<span className="text-zinc-600">.xyz</span></h1><p className="text-zinc-500 text-xs md:text-sm">Desenvolvido por @fp3 para fins educacionais.</p></header><div className="bg-[#050505] border border-white/10 rounded-2xl overflow-hidden flex flex-col"><div className="bg-[#0a0a0a] border-b border-white/5 px-4 py-3 flex items-center justify-between"><div className="flex gap-2">{[1,2,3].map(x=>(<div key={x} className="w-2.5 h-2.5 rounded-full bg-zinc-800"/>))}</div><div className="text-[10px] text-zinc-600 font-mono tracking-widest uppercase">Script</div><div className="w-10"/></div><div className="p-4 md:p-6 flex flex-col gap-6"><div className="grid grid-cols-1 md:grid-cols-5 gap-4"><div className="md:col-span-3 bg-[#0a0a0a] border border-white/5 rounded-xl p-2 group"><div className="relative aspect-video bg-[#050505] rounded-lg overflow-hidden cursor-pointer" onClick={()=>{setV(true);playSound('click')}}>{!v?(<div className="w-full h-full flex items-center justify-center"><Image src={`https://img.youtube.com/vi/${CONFIG.videoId}/maxresdefault.jpg`} alt="Thumb" fill className="object-cover opacity-30 grayscale" unoptimized/><div className="relative z-10 flex flex-col items-center gap-4"><div className="h-12 px-6 bg-[#0a0a0a] border border-white/10 rounded flex items-center justify-center group-hover:bg-white transition-all"><MonitorPlay className="text-zinc-400 group-hover:text-black" size={20}/></div><div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest flex items-center gap-2"><div className="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"/>Preview</div></div></div>):(<iframe src={`https://www.youtube-nocookie.com/embed/${CONFIG.videoId}?autoplay=1`} className="w-full h-full absolute top-0 left-0" allowFullScreen/>)}</div></div><div className="md:col-span-2 h-full"><StatsDeck/></div></div><div className="bg-[#0a0a0a] border border-white/5 rounded-xl p-3 flex flex-col sm:flex-row gap-3"><div className="flex-1 bg-black border border-white/5 rounded-lg p-4 relative overflow-hidden"><Terminal size={14} className="absolute left-4 top-1/2 -translate-y-1/2 text-zinc-700"/><div className="pl-8 overflow-x-auto scrollbar-hide"><CodeDisplay/></div></div><div className="flex gap-2 sm:w-auto w-full"><button onClick={copy} className="flex-1 sm:px-6 bg-[#0a0a0a] border border-white/10 text-zinc-300 rounded-lg text-xs hover:text-white flex items-center justify-center gap-2">{c?<Check size={16}/>:<Copy size={16}/>}{c?'COPIADO':'COPIAR'}</button><div className="relative"><button onClick={()=>setD(!d)} className="h-full px-4 bg-zinc-900 border border-white/10 rounded-lg text-zinc-400 hover:text-white"><Download size={16}/></button><AnimatePresence>{d&&(<><div className="fixed inset-0 z-40" onClick={()=>setD(false)}/><motion.div initial={{opacity:0,y:10}} animate={{opacity:1,y:0}} className="absolute bottom-full right-0 mb-3 w-40 bg-[#0a0a0a] border border-white/10 rounded-xl overflow-hidden shadow-2xl z-50 flex flex-col"><button onClick={()=>dl('txt')} className="px-4 py-3 text-xs text-left hover:bg-white/5 text-zinc-300 flex items-center gap-3"><FileText size={14}/>Arquivo .txt</button><button onClick={()=>dl('lua')} className="px-4 py-3 text-xs text-left hover:bg-white/5 text-zinc-300 border-t border-white/5 flex items-center gap-3"><FileCode size={14}/>Arquivo .lua</button></motion.div></>)}</AnimatePresence></div></div></div></div></div><div className="space-y-3"><div className="flex justify-between px-1"><h3 className="text-[10px] font-mono font-bold text-zinc-500 uppercase">Jogos Exclusivos</h3><span className="text-[9px] font-mono bg-white/5 text-zinc-300 px-2 py-1 rounded">{CONFIG.games.length} jogos</span></div><div className="relative overflow-hidden fade-edges py-2"><div className="flex gap-4 w-max animate-marquee">{[...CONFIG.games,...CONFIG.games].map((g:any,i:number)=>(<div key={i} className="flex items-center gap-3 bg-[#0a0a0a] border border-white/5 pl-2 pr-5 py-2 rounded-lg opacity-60 hover:opacity-100 transition-all">{g.icon&&<Image src={g.icon} alt={g.name} width={20} height={20} unoptimized className="rounded grayscale"/>}<div className="flex flex-col"><span className="text-xs font-medium text-zinc-200">{g.name}</span><span className="text-[9px] text-zinc-600 font-mono">Indetectado</span></div></div>))}</div></div></div><div className="w-full h-px bg-white/5 my-2"/><TeamSection/><FeatureSection/><footer className="pt-12 pb-8 flex flex-col items-center gap-3"><div className="flex items-center gap-2 text-xs text-zinc-600 font-mono border border-white/5 bg-[#0a0a0a] px-4 py-2 rounded-full"><AlertTriangle size={12}/>Use com responsabilidade</div><p className="text-[10px] text-zinc-700 font-mono">© 2026 michigun.xyz</p></footer></main>)}